package com.fdmgroup.controller;

import java.util.Scanner;

import com.fdmgroup.dao.ExamCollectionDao;
import com.fdmgroup.model.Exam;
import com.fdmgroup.model.Question;
import com.fdmgroup.model.Result;
import com.fdmgroup.model.User;

public class ExamController {
	private Exam exam;
	private Result result;
	private User user;
	private ExamCollectionDao examCollectionDao;
	private static ExamController examController;
	private long examTimer;
	Scanner in = new Scanner(System.in);
	
	private ExamController(){
		super();
		examCollectionDao = ExamCollectionDao.getInstance();
	}
	
	public static ExamController getInstance(){
		if (examController == null){
			examController = new ExamController();
		}
		return examController; 
	}
	
	public void startExam(int id){
		exam = (Exam) examCollectionDao.findById(id);
		examTimer = exam.getTimer();
		exam.randomize();
		System.out.println("Starting Exam");
		Question q;
		while (true){
			q = exam.getNextQuestion();
			if (q == null)
				break;
			else{
				System.out.println(q.getQuestion());
				if(in.next().equalsIgnoreCase(q.getCorrectAnswer())){
					System.out.println("Correct");
				}else{
					System.out.println("Wrong");
				}
			}
				
		}
	}
}
